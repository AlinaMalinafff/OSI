# Домашнее задание №4 по ОСИ
# Ибрагимова Алина Александровна, БПИ226
## Условие
![изображение](https://github.com/AlinaMalinafff/OSI/assets/150148650/8cc9858e-1620-4adc-8c38-17b9f22fd192)

Задание выполнено на 8.

## Описание кода
Подключаем все необходимые библиотеки, как в кодах с семинара. 

Определяем размер буффера в качестве глобальной константы.

В мейне сначала проверяем вызов из терминала: должно быть три аргумента - название файла через ./, далее имя файла с расширением в качестве файла для чтения и снова имя файла с расширением в качестве файла для вписывания текста. Если количество параметров для нас неудовлетворительно, то выводим об этом сообщение и завершаем работу программы.

Далее выносим из параметров имена файлов для удобства.

Открываем файл для чтения, используя системный вызов open() и O_RDONLY - read-only параметр. Проверяем, что он успешно открылся, иначе через perror() выводим подробную информацию об ошибке и завершаем программу.

Создаем буфер. 

Открываем файл для записи, используя системный вызов open(), флаг O_WRONLY (write-only), O_CREATE (если файла не существует, то надо создать его), O_TRUNC (если файл должен быть нулевой длины, если удалось его открыть на запись) и 0644 (код режима доступа, который означает, что только владелец может и читать, и изменять содержимое файла, в то время как остальные могут просто читать). Проверяем, что файл успешно открылся, иначе через perror() выводим подробную информацию об ошибке и завершаем программу.

Через цикл проходимся по всем байтам файла через read() и записываем его через write() в файл через буфер. Отлавлваем возможные ошибки.

Закрываем все файлы и сообщением в консоль сообщаем, что всё прошло успешно.

## Тесты
Код писался в реплите, где файл с кодом назывался main.
Далее буду иметь в виду первым файлом - файл чтения, вторым - файл записи.


1. Самый базовый тест: оба файла есть, первый полон, второй пуст.
   ДО:
![изображение](https://github.com/AlinaMalinafff/OSI/assets/150148650/a805e47a-3071-412e-8b87-fe28eac745a5)
![изображение](https://github.com/AlinaMalinafff/OSI/assets/150148650/4bd3ff92-6dbd-4aa9-beaa-9a2349144b8d)
  ШЕЛЛ+ПОСЛЕ:
![изображение](https://github.com/AlinaMalinafff/OSI/assets/150148650/8c5f5e1b-4d8c-4d4b-bd8b-2306057f673a)

2. Первый есть, второго нет.
   ДО:
![изображение](https://github.com/AlinaMalinafff/OSI/assets/150148650/fa43a338-ffe2-497e-bfe8-c36883a1df56)
   ПОСЛЕ:
![изображение](https://github.com/AlinaMalinafff/OSI/assets/150148650/cbf58252-60ca-4206-84fb-3448b79b7a57)

3. Первый пуст, второго нет (аналогично: первый пуст, второй пуст).
   ДО:
![изображение](https://github.com/AlinaMalinafff/OSI/assets/150148650/e2351b6c-7192-42e0-86d4-3426dbd12190)
  ПОСЛЕ:
![изображение](https://github.com/AlinaMalinafff/OSI/assets/150148650/3fb49450-0bbf-48e8-a8f8-afb7d9a47388)

4. Первый есть, второй НЕ пустой.
   ДО:
![изображение](https://github.com/AlinaMalinafff/OSI/assets/150148650/8950a60f-fc29-47df-86cd-3247a0875b63)
![изображение](https://github.com/AlinaMalinafff/OSI/assets/150148650/1008c887-8dda-45e8-8795-8f770490f66f)
  ПОСЛЕ:
![изображение](https://github.com/AlinaMalinafff/OSI/assets/150148650/f848aed1-ef8a-4b3e-b8e6-598935c180cd)
  КОММЕНТАРИИЙ:
успешно сократил файл под ноль и вписал, что надо.

Все положительные флаги проверили. Теперь проверим ошибки:

5. Первого нет.
   ДО:
![изображение](https://github.com/AlinaMalinafff/OSI/assets/150148650/c2069597-a841-4e9e-8308-9424d71a1976)
  ПОСЛЕ:
![изображение](https://github.com/AlinaMalinafff/OSI/assets/150148650/cd3e545f-fd13-468e-a6fd-825e2d7a086d)
  КОММЕНТАРИЙ:
не нашёл файла, выявил ошибку, вывел всю информацию об ошибке на экран.

7. Сам себя
   ДО:
![изображение](https://github.com/AlinaMalinafff/OSI/assets/150148650/bd2f2134-dfaa-4fd5-9638-15ce9697df1e)
   ПОСЛЕ:
![изображение](https://github.com/AlinaMalinafff/OSI/assets/150148650/0698f690-43d5-4d0c-9f0d-dbcae19c10cd)
  КОММЕНТАРИЙ:
интересно получается - сам же себя опустошает и пустоту вписывает в себя же..

8. Неправильное количество аргументов в командной строке при вызове программы
   ![изображение](https://github.com/AlinaMalinafff/OSI/assets/150148650/532eeeca-6e44-4c4b-ac6e-4dc495992d3a)

   Протестировано!

   ![56e1fbb52d21e13d5eb69d413c714524](https://github.com/AlinaMalinafff/OSI/assets/150148650/c5c2ab05-4d94-4063-8438-eb28e3f5bbea)















